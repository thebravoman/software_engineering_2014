=begin
Develop a program named FirstName_LastName_ClassNumber_33febd.rb

1. you are given an CSV file with student names and a folder with files;
1.1 The CSV is in the format: 
	First_name1, Last_name1
	First_name2, Last_name2
	...
	FirstNameN,LastNameN
1.2 if there are other arguments they should be discarded
2. The file names in the folder are in the form First_Last_digits.*; 
3. find  the students that are only in the folder and not in the csv.
4. Sort the result by type of the files ASC;
5. Produce a result in json named results.json:

{
"The_name_of_file_1" : {"extention":"The_extention_of_file_1"},
"The_name_of_file_2" : {"extention":"The_extention_of_file_2"},
...
}
=end

require 'csv'
student_names = Array.new
student_names2 = Array.new

CSV.foreach(ARGV[0]) do |csv|
	if !student_names.include? [csv[0],' ',csv[1]] then
		student_names << [csv[0],' ',csv[1]]
	end
end
Dir.glob("#{ARGV[1]}/*.*").each do |my_file|
	name = my_file.split(/\//).last.split(/_/)
	extention = my_file.split(/\//).last.split(/\./).last
	if !student_names.include? [name[0],' ',name[1]] then
		student_names2 << [extention,my_file.split(/\//).last.split(/\./).first]
	end
end
Dir.chdir File.dirname(__FILE__)
json = File.new("results.html", "w+")
json.puts "<results>"		
student_names2.sort.reverse.each do |extention, name|
	json.puts "<html>"
	json.puts "<body>"
	json.puts "<table>"
	json.puts "<tr><td>#{name}</td><td>#{extention}</td></tr>"
	json.puts "</table>"
	json.puts "</body>"
	json.puts "</html>"
end
json.puts "</results>"
json.close


